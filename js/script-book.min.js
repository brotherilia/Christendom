$(document).ready(function(){var chapterIdx,currentChapter,toTopBtn=$("#top-btn"),mainMenu=$("#main-menu"),popupMenu=$("#popup-menu"),menuOpenBtn=$("#menu-open-btn"),menuCloseBtn=$("#menu-close-btn"),contentsOpenBtn=$("#contents-open-btn"),backToTextNav=$("#back-to-text-nav"),backToTextBtn=$("#back-to-text-btn"),contents=$(".book__contents"),chapterLink=$(".book__contents-link"),runningTitle=$("#running-title"),chapter=$(".book__chapter"),chapterNav=$("#chapter-nav"),prevChapterLink=$("#prev-btn"),nextChapterLink=$("#next-btn"),firstChapter=chapter.first(),lastChapter=chapter.last(),firstChapterIdx=chapter.index(firstChapter),lastChapterIdx=chapter.index(lastChapter),currentChapterNumberMark=$("#current-chapter-number"),setupChapter=function(){chapter.hide(),prevChapterLink.text(chapterIdx),nextChapterLink.text(chapterIdx+2),currentChapterNumberMark.text(chapterIdx+1),runningTitle.fadeIn(600),chapterIdx==firstChapterIdx?(prevChapterLink.hide(),nextChapterLink.show()):chapterIdx==lastChapterIdx?(nextChapterLink.hide(),prevChapterLink.show()):(prevChapterLink.show(),nextChapterLink.show())},showChapter=function(){currentChapter=chapter.eq(chapterIdx),currentChapter.fadeIn(600),$("html, body").animate({scrollTop:0},0)};toTopBtn.click(function(){event.preventDefault(),$("html, body").animate({scrollTop:0},600)}),menuOpenBtn.click(function(){event.preventDefault(),mainMenu.fadeOut(600),popupMenu.fadeIn(600)}),menuCloseBtn.click(function(){event.preventDefault(),popupMenu.fadeOut(600),mainMenu.fadeIn(600)}),$(window).scroll(function(){$(this).scrollTop()>100&&(popupMenu.fadeOut(600),mainMenu.fadeIn(600))}),chapter.hide(),chapterNav.hide(),runningTitle.hide(),backToTextNav.hide(),$(chapterLink).click(function(event){event.preventDefault(),chapterIdx=chapterLink.index(this),contents.hide(),chapterNav.show(),mainMenu.show(),$(setupChapter),$(showChapter)}),prevChapterLink.click(function(){event.preventDefault(),chapterIdx--,$(setupChapter),$(showChapter)}),nextChapterLink.click(function(){event.preventDefault(),chapterIdx++,$(setupChapter),$(showChapter)}),contentsOpenBtn.click(function(){event.preventDefault(),chapter.hide(),popupMenu.hide(),chapterNav.hide(),runningTitle.hide(),backToTextNav.show(),contents.fadeIn(600)}),backToTextBtn.click(function(){event.preventDefault(),backToTextNav.hide(),contents.hide(),chapterNav.show(),runningTitle.show(),mainMenu.show(),chapter.fadeIn(600)})});