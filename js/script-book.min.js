$(document).ready(function(){var chapterIdx,currentChapter,itmMenu=($("#main-menu"),$("#itm-menu")),lnkMenuOpen=$("#lnk-menu-open"),itmBack=$("#itm-back"),lnkBackToText=$("#lnk-back-to-text"),popupMenu=$("#popup-menu"),lnkPopupMenuClose=$("#lnk-popup-menu-close"),itmContents=$("#itm-contents"),lnkContents=$("#lnk-contents"),popupSettings=$("#popup-settings"),lnkSettingsOpen=$("#lnk-settings-open"),lnkSettingsClose=$("#lnk-settings-close"),lnkFontSizeDecrease=$("#lnk-font-size-decrease"),lnkFontSizeIncrease=$("#lnk-font-size-increase"),fontSize=$("html, body").css("font-size").substr(0,2),langRu=$(".lang-ru"),langEn=$(".lang-en"),langSl=$(".lang-sl"),lnkLangRu=$("#lnk-lang-ru"),lnkLangEn=$("#lnk-lang-en"),lnkLangSl=$("#lnk-lang-sl"),lnkFontSans=$("#lnk-font-sans"),lnkFontSerif=$("#lnk-font-serif"),lnkColorScheme1=$("#lnk-color-scheme-1"),lnkColorScheme2=$("#lnk-color-scheme-2"),lnkColorScheme3=$("#lnk-color-scheme-3"),stylesheet=$("#stylesheet"),currentStylesheet=$("#stylesheet").attr("href"),lnkPrevChapter=$("#lnk-prev-chapter"),lnkNextChapter=$("#lnk-next-chapter"),lnkToTop=$("#lnk-to-top"),contents=$(".book__contents-items"),pageMainTitle=$(".page-main__title"),bookTitle=$(".book__title"),bookContentsSubTitle=$(".book__contents-subtitle"),chapterLink=$(".book__contents-link"),runningTitle=$(".book__running-title"),chapter=$(".book__chapter"),firstChapter=chapter.first(),lastChapter=chapter.last(),firstChapterIdx=chapter.index(firstChapter),lastChapterIdx=chapter.index(lastChapter),currentChapterNumberMark=$("#current-chapter-number"),setupChapter=(document.location.pathname,function(){chapter.hide(),lnkPrevChapter.text(chapterIdx),lnkNextChapter.text(chapterIdx+2),currentChapterNumberMark.text(chapterIdx+1),runningTitle.show(),chapterIdx==firstChapterIdx?(lnkPrevChapter.hide(),lnkNextChapter.show()):chapterIdx==lastChapterIdx?(lnkNextChapter.hide(),lnkPrevChapter.show()):(lnkPrevChapter.show(),lnkNextChapter.show())}),showChapter=function(){currentChapter=chapter.eq(chapterIdx),currentChapter.fadeIn(600),$("html, body").animate({scrollTop:0},0)},showBottomMenu=function(){lnkPrevChapter.show(),lnkNextChapter.show(),lnkToTop.show()};$(window).scroll(function(){$(this).scrollTop()>100?lnkToTop.fadeIn():lnkToTop.fadeOut()}),lnkToTop.click(function(){event.preventDefault(),$("html, body").animate({scrollTop:0},600)}),lnkMenuOpen.click(function(){event.preventDefault(),itmMenu.hide(),pageMainTitle.animate({opacity:"0"},600),"none"!=contents.css("display")?itmContents.hide():itmContents.show(),popupMenu.fadeIn(600)}),lnkPopupMenuClose.click(function(){event.preventDefault(),popupMenu.fadeOut(600),itmMenu.show(),pageMainTitle.animate({opacity:"1"},600)}),chapter.hide(),lnkPrevChapter.hide(),lnkNextChapter.hide(),runningTitle.hide(),itmMenu.show(),lnkFontSerif.css({opacity:"1"}),lnkFontSans.css({opacity:"0.5"}),"css/style-blue.min.css"==currentStylesheet?(lnkColorScheme1.css({opacity:"1"}),lnkColorScheme2.css({opacity:"0.5"}),lnkColorScheme3.css({opacity:"0.5"})):"css/style-red.min.css"==currentStylesheet?(lnkColorScheme1.css({opacity:"0.5"}),lnkColorScheme2.css({opacity:"1"}),lnkColorScheme3.css({opacity:"0.5"})):"css/style-green.min.css"==currentStylesheet&&(lnkColorScheme1.css({opacity:"0.5"}),lnkColorScheme2.css({opacity:"0.5"}),lnkColorScheme3.css({opacity:"1"})),lnkLangRu.css({opacity:"0.5"}),lnkLangEn.css({opacity:"0.5"}),lnkLangSl.css({opacity:"1"}),langEn.hide(),langRu.hide(),langSl.show(),$(chapterLink).click(function(event){event.preventDefault(),chapterIdx=chapterLink.index(this),itmBack.hide(),contents.hide(),bookTitle.hide(),bookContentsSubTitle.hide(),$(showBottomMenu),itmMenu.show(),$(setupChapter),$(showChapter)}),lnkPrevChapter.click(function(){event.preventDefault(),chapterIdx--,$(setupChapter),$(showChapter)}),lnkNextChapter.click(function(){event.preventDefault(),chapterIdx++,$(setupChapter),$(showChapter)}),$(window).on("swipeleft",function(event){chapterIdx<lastChapterIdx&&(chapterIdx++,$(setupChapter),$(showChapter))}),$(window).on("swiperight",function(event){chapterIdx>firstChapterIdx&&(chapterIdx--,$(setupChapter),$(showChapter))}),lnkContents.click(function(){event.preventDefault(),chapter.hide(),popupMenu.hide(),lnkPrevChapter.hide(),lnkNextChapter.hide(),runningTitle.hide(),bookTitle.show(),bookContentsSubTitle.show(),itmBack.show(),contents.fadeIn(600),pageMainTitle.animate({opacity:"1"},600)}),lnkBackToText.click(function(){event.preventDefault(),itmBack.hide(),contents.hide(),bookTitle.hide(),bookContentsSubTitle.hide(),$(showBottomMenu),runningTitle.show(),itmMenu.show(),$(setupChapter),$(showChapter)}),lnkSettingsOpen.click(function(){event.preventDefault(),popupMenu.fadeOut(600),popupSettings.fadeIn(600)}),lnkSettingsClose.click(function(){event.preventDefault(),popupSettings.fadeOut(600),itmMenu.show(),pageMainTitle.css({opacity:"1"})}),lnkFontSans.click(function(){$(this).css({opacity:"1"}),lnkFontSerif.css({opacity:"0.5"}),$("html, body").css({"font-family":"'PT Sans', Arial, sans-serif"})}),lnkFontSerif.click(function(){$(this).css({opacity:"1"}),lnkFontSans.css({opacity:"0.5"}),$("html, body").css({"font-family":"'PT Serif', Georgia, serif"})}),lnkFontSizeDecrease.click(function(){event.preventDefault(),fontSize>10&&(fontSize--,$("html, body").css({"font-size":fontSize+"px"}))}),lnkFontSizeIncrease.click(function(){event.preventDefault(),fontSize<24&&(fontSize++,$("html, body").css({"font-size":fontSize+"px"}))}),lnkLangEn.click(function(){$(this).css({opacity:"1"}),lnkLangRu.css({opacity:"0.5"}),lnkLangSl.css({opacity:"0.5"}),langRu.hide(),langSl.hide(),langEn.show()}),lnkLangRu.click(function(){$(this).css({opacity:"1"}),lnkLangEn.css({opacity:"0.5"}),lnkLangSl.css({opacity:"0.5"}),langEn.hide(),langSl.hide(),langRu.show()}),lnkLangSl.click(function(){$(this).css({opacity:"1"}),lnkLangEn.css({opacity:"0.5"}),lnkLangRu.css({opacity:"0.5"}),langEn.hide(),langRu.hide(),langSl.show()}),lnkColorScheme1.click(function(event){stylesheet.attr("href","css/style-blue.min.css"),lnkColorScheme1.css({opacity:"1"}),lnkColorScheme2.css({opacity:"0.5"}),lnkColorScheme3.css({opacity:"0.5"})}),lnkColorScheme2.click(function(event){stylesheet.attr("href","css/style-red.min.css"),lnkColorScheme1.css({opacity:"0.5"}),lnkColorScheme2.css({opacity:"1"}),lnkColorScheme3.css({opacity:"0.5"})}),lnkColorScheme3.click(function(event){stylesheet.attr("href","css/style-green.min.css"),lnkColorScheme1.css({opacity:"0.5"}),lnkColorScheme2.css({opacity:"0.5"}),lnkColorScheme3.css({opacity:"1"})})});